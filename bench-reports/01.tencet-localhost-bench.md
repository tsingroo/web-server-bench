## Wrk 腾讯云本机Localhost测试

#### 腾讯云2c2g环境基本信息(未做任何优化)
- 规格: SA2.MEDIUM2
- 处理器型号: AMD EPYC™ Rome(2.6GHz/3.3GHz)
- 核心数: 2 vCPU
- 内存: 2GB
- 系统: ubuntu 24.04 LTS 64位
- wrk版本: 4.2.0
- go编译版本: 1.25.3
- Nodejs版本: 20.11.0
- rustc版本: 1.91.0
- zig版本: 0.15.2(使用0.16.0编译zap和tokamak项目会失败)
- python版本: 3.12.3


#### 说明
- 编译类的程序在编译后通过scp放到Ecs上使用nohup运行，无Docker层
- wrk和服务端运行在一起会争抢WebServer进程的CPU资源，但是localhost网络不会把请求包发到网卡。
- 本期未加入APM监控，内存是top观测结果
- 对于默认有限流的如go-zero等框架，通过配置或代码解除限流
- Rust编译加入了`--release`参数

#### 执行```wrk -t1 -c100 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|50K|1.97ms|28.52ms|1%(20MB)|无|
|fiber|101.2K|0.9ms|23.2ms|0.6%(12MB)|无|
|koa|16K|6.25ms|297.4ms|4%(80MB)|无|
|go-zero|21.5K|4.7ms|69.78ms|2%(40MB)-8%(160MB)之间波动|无|
|actix-web|121.4K|0.91ms|9.2ms|0.3%(6MB)|无|
|tokamak|70.4K|1.41ms|28.24ms|0.4%(8MB)|无|
|flask|1.57K|63.56ms|127.39ms|1.8%(36MB)|无|
|kratos|37K|2.86ms|34.8ms|1.1%(22MB)|无|
|hertz|104K|0.84ms|10.8ms|1.3%(26MB)|无|


#### 执行```wrk -t5 -c100 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|41.9K|2.85ms|57ms|0.6%(12MB)|无|
|fiber|95.1K|1.1ms|15.3ms|1.3%(26MB)|无|
|koa|15.5K|6.47ms|332.5ms|4%(80MB)|无|
|go-zero|20.1K|6.37ms|152.76ms|2%(40MB)-8%(160MB)之间波动|无|
|actix-web|111.8K|0.9ms|9.48ms|0.4%(8MB)|无|
|tokamak|61.5K|1.64ms|20.81ms|0.4%(8MB)|无|
|flask|1.55K|64ms|123ms|1.9%(38MB)|无|
|kratos|33.8K|4.53ms|79.6ms|1.1%(22MB)|无|


#### 执行```wrk -t1 -c1000 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|43.9K|22.7ms|122.8ms|2.5%(50MB)|无|
|fiber|98.5K|8.39ms|23.3ms|1.3%(26MB)|无|
|koa|15.1K|64.9ms|1990ms|5%(100MB)|无|
|go-zero|19.7K|51.5ms|420.68ms|2%(40MB)-10%(200MB)之间波动|无|
|actix-web|112.9K|6.95ms|29.25ms|1%(20MB)|无|
|tokamak|68.3K|14.54ms|104.81ms|0.9%(18MB)|无|
|flask|1.57K|93.6ms|1870ms|1.9%(38MB)|844个timeout错误|
|kratos|34.2K|29.19ms|158ms|2.6%(52MB)|无|



#### 执行```wrk -t5 -c1000 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|38.2K|27.5ms|168ms|2.4%(48MB)|无|
|fiber|87.98K|11.24ms|48.78ms|1.3%(26MB)|无|
|koa|15.1K|65ms|1990ms|5.1%(102MB)|无|
|go-zero|19.4K|60.1ms|639.14ms|2%(40MB)-8%(160MB)之间波动|无|
|actix-web|103.7K|9.48ms|45.22ms|1.2%(24MB)|无|
|tokamak|60.9K|16.39ms|59.82ms|1.1%(22MB)|无|
|flask|1.55K|95ms|1940ms|1.9%(38MB)|1242个read错误，815个timeout错误|
|kratos|32K|41.44ms|359.66ms|2.6%(52MB)|无|



#### 执行```wrk -t1 -c2000 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|44.1K|23ms|151.9ms|2.5%(50MB)|980个socket connect错误|
|fiber|84K|9.73ms|50.3ms|1.3%(26MB)|980个socket connect错误|
|koa|13K|76.5ms|1970ms|5.1%(102MB)|980个socket connect错误, 500个timeout错误|
|go-zero|19.4K|52.44ms|377.39ms|2%(40MB)-11%(220MB)之间波动|980个socket connect错误|
|actix-web|112.9K|7ms|29.81ms|1.2%(24MB)|980个socket connect错误|
|tokamak|53.75K|18.83ms|50.91ms|1%(20MB)|980个socket connect错误|
|flask|1.56K|92ms|1980ms|1.9%(38MB)|984个socket connect错误，1210个read错误，777个timeout错误|
|kratos|34K|29.8ms|198.2ms|2.6%(52MB)|980个socket connect错误|



#### 执行```wrk -t5 -c2000 -d300s http://localhost:8080/ping```
|框架|qps|平均响应时间|最大响应时间|内存占用|错误|
|----|----|----|----|----|----|
|gin|37.7K|26.9ms|142.2ms|2.4%(48MB)|984个socket connect错误|
|fiber|87.8K|11.3ms|47ms|1.3%(26MB)|984个socket connect错误|
|koa|13K|77.3ms|1980ms|4.8%(96MB)|984个socket connect错误, 330个timeout错误|
|go-zero|17.6K|58.1ms|728.14ms|2%(40MB)-11%(220MB)之间波动|984个socket connect错误|
|actix-web|102.2K|9.64ms|53.54ms|1.2%(24MB)|984个socket connect错误|
|tokamak|61.4K|16.52ms|59.36ms|1.1%(22MB)|984个socket connect错误|
|flask|1.56K|95ms|2000ms|1.9%(38MB)|984个socket connect错误，1992个read错误，1102个timeout错误|
|kratos|32.1K|32.98ms|376.31ms|2.7%(54MB)|984个socket connect错误|

